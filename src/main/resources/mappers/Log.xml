<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.fc.dao.LogDao">

<insert id="insert" parameterType="cn.fc.bean.Log">
    <choose>
        <when test="user != null">
            INSERT INTO log (AUTHORITY_ID, method, req_time, USER_ID) VALUES (#{authority.id}, #{method}, #{reqTime}, #{user.id});
        </when>
        <otherwise>
            INSERT INTO log (AUTHORITY_ID, method, req_time, USER_ID) VALUES (#{authority.id}, #{method}, #{reqTime}, -1);
        </otherwise>
    </choose>
</insert>

<delete id="delete" parameterType="long">
    DELETE FROM log
    WHERE id = #{id}
</delete>
<delete id="clear">
    DELETE FROM log
</delete>
</mapper>